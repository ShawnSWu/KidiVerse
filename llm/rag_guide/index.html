<!doctype html><html lang=zh-TW class=scroll-smooth><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>KidiVerse |</title><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=/KidiVerse/css/style.css><link rel=icon type=image/svg+xml href=/KidiVerse/images/logo.svg></head><body><div class=page-container><div class=page-content><aside class=sidebar><aside class=sidebar><div class=sidebar-container><header class=sidebar-header><h2 class=sidebar-title><a href=https://shawnswu.github.io/KidiVerse/ class=sidebar-home-link>KidiVerse</a></h2></header><nav class=sidebar-nav><div class=sidebar-folder data-folder-id=section-0><button class=sidebar-folder-toggle aria-expanded=false>
<svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=folder-title>Blockchain</span>
<svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button><div class=sidebar-folder-content><ul class=sidebar-sublist><li class=sidebar-item><a href=/KidiVerse/blockchain/blockchain-overview/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Blockchain Overview</span></a></li><li class=sidebar-item><a href=/KidiVerse/blockchain/consensus/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Consensus</span></a></li><li class=sidebar-item><a href=/KidiVerse/blockchain/smart-contracts/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Smart Contracts</span></a></li></ul></div></div><div class=sidebar-folder data-folder-id=section-1><button class=sidebar-folder-toggle aria-expanded=false>
<svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=folder-title>Container</span>
<svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button><div class=sidebar-folder-content><ul class=sidebar-sublist><li class=sidebar-item><a href=/KidiVerse/container/docker/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Docker</span></a></li><li class=sidebar-item><div class=sidebar-folder data-folder-id=folder-feaafff89ba8906cbe1e4006a613aca9><button class=sidebar-folder-toggle aria-expanded=false>
<svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=folder-title>Kubernetes</span>
<svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button><div class=sidebar-folder-content><ul class=sidebar-sublist><li class=sidebar-item><a href=/KidiVerse/container/kubernetes/controller/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Controller</span></a></li><li class=sidebar-item><a href=/KidiVerse/container/kubernetes/ingress/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Ingress</span></a></li><li class=sidebar-item><a href=/KidiVerse/container/kubernetes/pod/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Pod</span></a></li></ul></div></div></li></ul></div></div><div class=sidebar-folder data-folder-id=section-2><button class=sidebar-folder-toggle aria-expanded=false>
<svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=folder-title>Git</span>
<svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button><div class=sidebar-folder-content><ul class=sidebar-sublist><li class=sidebar-item><a href=/KidiVerse/git/git-basics/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Git Basics</span></a></li></ul></div></div><div class=sidebar-folder data-folder-id=section-3><button class=sidebar-folder-toggle aria-expanded=false>
<svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=folder-title>GRPC vs GraphQL</span>
<svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button><div class=sidebar-folder-content><ul class=sidebar-sublist><li class=sidebar-item><a href=/KidiVerse/grpc-vs-graphql/graphql/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>GraphQL</span></a></li><li class=sidebar-item><a href=/KidiVerse/grpc-vs-graphql/grpc/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>GRPC</span></a></li></ul></div></div><div class=sidebar-folder data-folder-id=section-4><button class=sidebar-folder-toggle aria-expanded=false>
<svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=folder-title>Kafka</span>
<svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button><div class=sidebar-folder-content><ul class=sidebar-sublist><li class=sidebar-item><a href=/KidiVerse/kafka/broker/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Broker</span></a></li><li class=sidebar-item><a href=/KidiVerse/kafka/consumer/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Consumer</span></a></li><li class=sidebar-item><a href=/KidiVerse/kafka/kafka-streams/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Kafka Streams</span></a></li><li class=sidebar-item><a href=/KidiVerse/kafka/kafka/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Kafka</span></a></li><li class=sidebar-item><a href=/KidiVerse/kafka/producers/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Producers</span></a></li></ul></div></div><div class=sidebar-folder data-folder-id=section-5><button class=sidebar-folder-toggle aria-expanded=false>
<svg class="folder-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
<span class=folder-title>LLM</span>
<svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button><div class=sidebar-folder-content><ul class=sidebar-sublist><li class=sidebar-item><a href=/KidiVerse/llm/fine-tuning/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Fine Tuning</span></a></li><li class=sidebar-item><a href=/KidiVerse/llm/llm-architecture/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Llm Architecture</span></a></li><li class=sidebar-item><a href=/KidiVerse/llm/prompt-engineering/ class=sidebar-link><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Prompt Engineering</span></a></li><li class=sidebar-item><a href=/KidiVerse/llm/rag_guide/ class="sidebar-link active"><svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
<span class=link-text>Rag Guide</span></a></li></ul></div></div></nav><div class=sidebar-footer></div></div></aside></aside><main class=main-content><article class=post-article><div class=markdown-area><h1 id=retrievalaugmented-generation-rag>Retrieval‑Augmented Generation (RAG)</h1><p><strong>RAG</strong> combines vector search with language‑model generation so your application can answer questions using <em>fresh, domain‑specific knowledge</em> instead of the model’s static training data.</p><hr><h2 id=1why-rag>1 Why RAG?</h2><table><thead><tr><th>Benefit</th><th>Detail</th></tr></thead><tbody><tr><td><strong>Up‑to‑date answers</strong></td><td>Inject current docs; bypass the model’s knowledge cut‑off.</td></tr><tr><td><strong>Smaller models</strong></td><td>Offload facts to the retriever; keep the LLM lightweight.</td></tr><tr><td><strong>Reduced hallucination</strong></td><td>Source grounding text that the model can quote or cite.</td></tr><tr><td><strong>Data governance</strong></td><td>Easily remove or update knowledge by re‑indexing documents.</td></tr></tbody></table><hr><h2 id=2pipeline-anatomy>2 Pipeline Anatomy</h2><pre tabindex=0><code class=language-mermaid data-lang=mermaid>flowchart TD
  U[User Query] --&gt; E[Embedder]
  E --&gt; V[Vector&lt;br/&gt;DB]
  V --&gt;|Top‑k docs| C[Context]
  U --&gt; P[Prompt Builder]
  C --&gt; P
  P --&gt; L[LLM🔮]
  L --&gt; R[Response]
</code></pre><ol><li><strong>Embed</strong> query and compare against a vector index.</li><li><strong>Retrieve</strong> top‑k chunks; optional keyword or filter stage.</li><li><strong>Compose prompt</strong>: system msg + retrieved context + user query.</li><li><strong>Generate</strong> answer with citations.</li></ol><hr><h2 id=3retrieval-layer>3 Retrieval Layer</h2><h3 id=31embedding-models>3.1 Embedding Models</h3><table><thead><tr><th>Model</th><th>Dim</th><th>Strength</th></tr></thead><tbody><tr><td><code>text-embedding-3-small</code></td><td>1 536</td><td>Cost‑effective, multilingual</td></tr><tr><td><code>bge-large-en</code></td><td>1 024</td><td>Open‑source, rerank friendly</td></tr><tr><td><code>instructor-xl</code></td><td>768</td><td>Instruction‑tuned for QA</td></tr></tbody></table><blockquote><p><strong>Rule:</strong> Use domain‑trained or instruction embeddings if your queries are question‑like.</p></blockquote><h3 id=32chunking-strategy>3.2 Chunking Strategy</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Chunk size: 512–1 024 tokens
</span></span><span style=display:flex><span>Overlap   : 10–20 %
</span></span><span style=display:flex><span>Heuristic : split on headings &gt; paragraphs &gt; sentences
</span></span></code></pre></div><h3 id=33vector-databases>3.3 Vector Databases</h3><table><thead><tr><th>DB</th><th>Index Type</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Qdrant</strong></td><td>HNSW + payload</td><td>Rust core, dynamic filters</td></tr><tr><td><strong>Pinecone</strong></td><td>ScaNN/HNSW</td><td>Fully‑managed cloud</td></tr><tr><td><strong>Milvus</strong></td><td>IVF‑Flat, GPU</td><td>Scales to billions of vectors</td></tr></tbody></table><hr><h2 id=4generation-layer>4 Generation Layer</h2><h3 id=41prompt-template-jinja-style>4.1 Prompt Template (Jinja style)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jinja data-lang=jinja><span style=display:flex><span>SYSTEM:
</span></span><span style=display:flex><span>You are an expert assistant. Cite sources like [1], [2].
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CONTEXT:
</span></span><span style=display:flex><span><span style=color:#75715e>{%</span> <span style=color:#66d9ef>for</span> doc <span style=color:#66d9ef>in</span> docs <span style=color:#75715e>%}</span>
</span></span><span style=display:flex><span>[<span style=color:#75715e>{{</span> loop.index <span style=color:#75715e>}}</span>] <span style=color:#75715e>{{</span> doc.content <span style=color:#f92672>|</span> <span style=color:#a6e22e>truncate</span><span style=color:#f92672>(</span><span style=color:#ae81ff>300</span><span style=color:#f92672>)</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{%</span> <span style=color:#66d9ef>endfor</span> <span style=color:#75715e>%}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>USER: <span style=color:#75715e>{{</span> question <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>ASSISTANT:
</span></span></code></pre></div><h3 id=42python-skeleton-langchain>4.2 Python Skeleton (LangChain)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> langchain.embeddings <span style=color:#f92672>import</span> OpenAIEmbeddings
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> langchain.vectorstores <span style=color:#f92672>import</span> Qdrant
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> langchain.chat_models <span style=color:#f92672>import</span> ChatOpenAI
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> langchain.chains <span style=color:#f92672>import</span> RetrievalQA
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>emb <span style=color:#f92672>=</span> OpenAIEmbeddings(model<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text-embedding-3-small&#34;</span>)
</span></span><span style=display:flex><span>vectordb <span style=color:#f92672>=</span> Qdrant(collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;kb&#34;</span>, embeddings<span style=color:#f92672>=</span>emb)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>llm  <span style=color:#f92672>=</span> ChatOpenAI(model_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gpt-4o-mini&#34;</span>, temperature<span style=color:#f92672>=</span><span style=color:#ae81ff>0.2</span>)
</span></span><span style=display:flex><span>qa   <span style=color:#f92672>=</span> RetrievalQA<span style=color:#f92672>.</span>from_chain_type(
</span></span><span style=display:flex><span>         llm<span style=color:#f92672>=</span>llm,
</span></span><span style=display:flex><span>         chain_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stuff&#34;</span>,
</span></span><span style=display:flex><span>         retriever<span style=color:#f92672>=</span>vectordb<span style=color:#f92672>.</span>as_retriever(search_kwargs<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;k&#34;</span>: <span style=color:#ae81ff>4</span>})
</span></span><span style=display:flex><span>       )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>qa({<span style=color:#e6db74>&#34;query&#34;</span>: <span style=color:#e6db74>&#34;How does PID control work?&#34;</span>})
</span></span></code></pre></div><hr><h2 id=5evaluation--guardrails>5 Evaluation & Guardrails</h2><table><thead><tr><th>Metric</th><th>Checks…</th><th>Tooling</th></tr></thead><tbody><tr><td><strong>Groundedness</strong></td><td>Citation accuracy</td><td>Atlas Eval, RAGAS</td></tr><tr><td><strong>Answer F1 / BLEU</strong></td><td>Content relevancy</td><td>LM‑eval‑harness</td></tr><tr><td><strong>Latency & cost</strong></td><td>Real‑time SLA</td><td>Prometheus + Grafana</td></tr><tr><td><strong>Toxicity / PII</strong></td><td>Safety compliance</td><td>OpenAI Moderation API</td></tr></tbody></table><hr><h2 id=6operational-tips>6 Operational Tips</h2><ol><li><strong>Hybrid Retrieval</strong> (BM25 + vectors) boosts recall on rare terms.</li><li><strong>Cold‑cache pre‑warm:</strong> pre‑query popular FAQs during deployment.</li><li><strong>Index refresh cadence:</strong> real‑time via Kafka CDC or nightly batch.</li><li><strong>Citation truncation:</strong> store doc titles + hashes to keep prompts short.</li><li><strong>Fallbacks:</strong> if retrieval returns &lt;3 docs → switch to direct LLM answer with disclaimer.</li></ol><hr><h2 id=7security-considerations>7 Security Considerations</h2><ul><li><strong>Strip PII</strong> before embedding; vectors are hard to delete.</li><li><strong>Tenant isolation:</strong> namespaced collections per customer; sign requests.</li><li><strong>Prompt injection defense:</strong> validate and sanitize retrieved text.</li></ul><hr><h2 id=8rag-checklist->8 RAG Checklist ✅</h2><ul><li><input disabled type=checkbox> Domain corpus collected & deduplicated</li><li><input disabled type=checkbox> Embeddings evaluated (<code>cos_sim</code> vs. <code>dot_prod</code>)</li><li><input disabled type=checkbox> Vector DB latency &lt; 100 ms at p95</li><li><input disabled type=checkbox> Prompt template includes citations & role separation</li><li><input disabled type=checkbox> Offline eval > 85 % groundedness, &lt; 1 % toxicity</li><li><input disabled type=checkbox> Dashboards & alerts configured</li></ul><hr><h2 id=9further-reading>9 Further Reading</h2><ul><li>Lewis et al., <em>Retrieval‑Augmented Generation</em> (2020)</li><li>LlamaIndex docs – <a href=https://www.llamaindex.ai/>https://www.llamaindex.ai/</a></li><li>LangChain RAG cookbook – <a href=https://python.langchain.com/docs/use_cases/question_answering/>https://python.langchain.com/docs/use_cases/question_answering/</a></li></ul><p><em>Build once, re‑index often—your model will thank you.</em> ✨</p></div></article></main></div></div><script src=/KidiVerse/js/main.js defer></script><script src=/KidiVerse/js/cosmic-background.js defer></script><script src=/KidiVerse/js/obsidian-images.js defer></script></body></html>